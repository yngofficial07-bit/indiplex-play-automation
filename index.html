<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>INDIPLEX | THE ABYSSAL VOID ENGINE</title>
    
    <script src="https://pl28716477.effectivegatecpm.com/08/29/b7/0829b70499d7f6dcbbc947340a47ca65.js"></script>
    <script src="https://pl28703128.effectivegatecpm.com/ff/63/3e/ff633ed807491685eb8ea72ff91c6441.js"></script>
    <script src="https://pl28703227.effectivegatecpm.com/e0/da/81/e0da8134581e4f8447faee3f94c03c5c.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>

    <style>
        /* --- [1] THE ORIGINAL ABYSSAL DESIGN SYSTEM --- */
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@800&family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;700&family=Montserrat:wght@200;500;900&display=swap');
        
        :root { 
            --red: #ff0000; 
            --deep-red: #8b0000;
            --neon-blue: #00d2ff;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
            --chrome-grad: linear-gradient(135deg, #000 0%, #222 10%, #666 25%, #fff 50%, #666 75%, #222 90%, #000 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { 
            background: #000; color: #fff; font-family: 'Roboto', sans-serif; 
            overflow-x: hidden; height: 100%; width: 100%;
        }

        /* --- [2] ORIGINAL ABYSSAL VOID INTRO (NO CHANGES) --- */
        #intro-stage { 
            height: 100vh; width: 100%; display: flex; justify-content: center; align-items: center; 
            background: #000; position: fixed; z-index: 99999; 
            transition: opacity 1.8s cubic-bezier(0.7, 0, 0.3, 1); top:0; left:0; overflow: hidden;
        }
        #abyss-canvas { position: absolute; inset: 0; z-index: 10; pointer-events: none; }
        .vignette-layer { position: absolute; inset: 0; z-index: 20; pointer-events: none; background: radial-gradient(circle, transparent 20%, #000 100%); }

        #heartbeat-scanner { 
            position: absolute; width: 0; height: 1.5px; background: #fff; 
            box-shadow: 0 0 40px #fff, 0 0 80px #fff; z-index: 10000; 
            opacity: 0; top: 50%;
        }
        @keyframes scan-animation { 
            0% { width: 0; left: 0; opacity: 0; } 
            20% { width: 100%; left: 0; opacity: 1; } 
            80% { width: 100%; left: 0; opacity: 1; } 
            100% { width: 0; left: 100%; opacity: 0; } 
        }

        .monolith-wrap { position: relative; z-index: 100; perspective: 2500px; transform-style: preserve-3d; }
        .silver-monolith {
            position: relative; width: clamp(280px, 80vw, 1100px); height: clamp(150px, 30vh, 480px);
            background: var(--chrome-grad); background-size: 400% 400%; border-radius: 4px; 
            display: flex; justify-content: center; align-items: center;
            opacity: 0; transform: translateZ(-3000px) rotateX(25deg);
            box-shadow: 0 0 200px rgba(255, 255, 255, 0.25), inset 0 0 120px rgba(0, 0, 0, 1);
            animation: arrival 2.2s cubic-bezier(0.1, 1, 0.1, 1) forwards 3s, metallic-shimmer 8s linear infinite;
        }
        @keyframes arrival { 0% { opacity: 0; transform: translateZ(-3000px) rotateX(25deg); filter: blur(60px); } 100% { opacity: 1; transform: translateZ(0) rotateX(0deg); filter: blur(0); } }
        @keyframes metallic-shimmer { 0% { background-position: 0% 50%; } 100% { background-position: 400% 50%; } }

        .brand-text { 
            font-family: 'Syncopate', sans-serif; font-size: clamp(2rem, 12vw, 10rem); font-weight: 800; 
            letter-spacing: 25px; color: #000; text-transform: uppercase; mix-blend-mode: multiply; 
            opacity: 0; animation: reveal-text 2.5s cubic-bezier(0.19, 1, 0.22, 1) forwards 4.5s; 
        }
        @keyframes reveal-text { 0% { opacity: 0; letter-spacing: 120px; transform: scale(0.7); } 100% { opacity: 1; letter-spacing: -8px; transform: scale(1); } }

        /* --- [3] UI NAVIGATION --- */
        #vanta-background { position: fixed; inset: 0; z-index: -1; }
        
        nav { 
            position: fixed; top: 0; width: 100%; height: 95px; z-index: 5000; 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 0 6%; background: rgba(0, 0, 0, 0.94); backdrop-filter: blur(35px); 
            border-bottom: 1px solid var(--glass-border); 
        }
        .logo-group { cursor: pointer; }
        .nav-brand { 
            font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 30px; 
            background: linear-gradient(to bottom, #ffffff 40%, #ff0000 100%); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 3px; 
        }
        .nav-slogan { font-size: 7px; color: #777; letter-spacing: 1.5px; font-weight: 900; text-transform: uppercase; font-family: 'Montserrat'; margin-top: 5px; }

        .search-bar { 
            background: rgba(255,255,255,0.06); border: 1px solid #333; color: #fff; 
            padding: 12px 22px; border-radius: 30px; outline: none; width: 220px; 
            font-family: 'Montserrat'; transition: 0.4s;
        }
        .search-bar:focus { width: 300px; border-color: var(--red); }

        /* --- [4] THE 3D RGB CARDS --- */
        #home-wrapper { display: none; position: relative; z-index: 50; padding-top: 120px; }
        .section-header { 
            padding-left: 15px; font-family: 'Orbitron'; font-size: 15px; color: var(--red); 
            border-left: 6px solid var(--red); margin: 45px 6% 25px; letter-spacing: 4px; font-weight: 900;
        }
        .movies-grid { 
            padding: 0 6% 80px; display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 40px; 
        }

        .media-card { 
            position: relative; border-radius: 25px; overflow: hidden; background: #000; 
            cursor: pointer; padding: 2.5px; height: 340px; transform-style: preserve-3d; 
            transition: transform 0.8s cubic-bezier(0.2, 1, 0.2, 1); 
        }
        .media-card::before { 
            content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; 
            background: conic-gradient(from 0deg, transparent, #ff0000, #00d2ff, #7a00ff, #ff0000); 
            animation: border-spin 4s linear infinite; z-index: -2; opacity: 0; transition: 0.6s; 
        }
        .media-card:hover::before { opacity: 1; }
        .media-card:hover { transform: translateY(-18px) rotateX(10deg) rotateY(6deg); }
        .media-card::after { content: ""; position: absolute; inset: 4.5px; background: #0a0a0a; border-radius: 21px; z-index: -1; }
        
        @keyframes border-spin { 100% { transform: rotate(360deg); } }
        
        .media-card img { width: 100%; height: 265px; object-fit: cover; border-radius: 21px 21px 0 0; }
        .media-card h3 { font-size: 12px; font-family: 'Montserrat'; text-align: center; padding: 10px; }

        /* --- [5] EXPANDED SERIES ENGINE --- */
        #details-panel { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.99); backdrop-filter: blur(50px); 
            display: none; z-index: 10000; overflow-y: auto; padding: 120px 8% 60px;
        }
        .panel-close { position: fixed; top: 35px; right: 50px; font-size: 55px; color: var(--red); cursor: pointer; z-index: 11000; }

        .series-hero { display: flex; gap: 50px; margin-bottom: 60px; flex-wrap: wrap; }
        .series-poster { width: 280px; border-radius: 20px; border: 1px solid var(--glass-border); }
        .series-title { font-family: 'Orbitron'; font-size: 45px; margin-bottom: 15px; }
        .series-desc { color: #aaa; line-height: 1.8; font-size: 15px; margin-bottom: 30px; }

        .season-track { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 20px; border-bottom: 1px solid #222; margin-bottom: 40px; }
        .season-pill { 
            background: #111; border: 1px solid #333; color: #888; padding: 14px 30px; 
            border-radius: 10px; cursor: pointer; font-family: 'Orbitron'; font-size: 11px; white-space: nowrap;
        }
        .season-pill.active { background: var(--red); color: #fff; box-shadow: 0 0 20px rgba(255,0,0,0.4); }

        .episode-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        .episode-card { 
            background: #0f0f0f; border: 1px solid var(--glass-border); padding: 22px; 
            border-radius: 18px; cursor: pointer; transition: 0.4s; display: flex; align-items: center; gap: 20px;
        }
        .episode-card:hover { border-color: var(--red); transform: translateX(10px); }

        /* --- [6] PLAYER & MULTI-SERVER --- */
        #theater-mode { position: fixed; inset: 0; background: #000; display: none; z-index: 50000; }
        .theater-nav { position: fixed; top: 30px; left: 30px; width: calc(100% - 60px); display: flex; justify-content: space-between; z-index: 50001; }
        .back-btn { width: 55px; height: 55px; border-radius: 50%; background: var(--red); display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .server-btns { display: flex; gap: 10px; }
        .srv-pill { background: #111; border: 1px solid var(--red); color: #fff; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-family: 'Orbitron'; font-size: 10px; }
        .srv-pill.active { background: var(--red); }
        #theater-frame { width: 100%; height: 100%; border: none; }

        /* --- [7] SIDEBAR & SMART LINK --- */
        #sidebar { 
            position: fixed; top: 0; right: -350px; width: 340px; height: 100%; 
            background: rgba(5,5,5,0.99); backdrop-filter: blur(50px); z-index: 9000; 
            transition: 0.7s cubic-bezier(0.8, 0, 0.2, 1); padding: 120px 40px; border-left: 1px solid var(--glass-border);
        }
        #sidebar.open { right: 0; }
        .menu-link { padding: 22px 0; color: #777; font-family: 'Orbitron'; font-size: 13px; cursor: pointer; display: flex; align-items: center; gap: 20px; }
        .menu-link:hover { color: var(--red); }

        /* SMART LINK AS PREMIUM BUTTON */
        .smart-link-ad { 
            margin-top: 40px; padding: 20px; background: rgba(255,0,0,0.1); border: 1px dashed var(--red); 
            border-radius: 15px; color: var(--red); text-align: center; text-decoration: none; 
            display: block; font-family: 'Orbitron'; font-size: 12px; 
        }

        #admin-gate { position: fixed; inset: 0; background: rgba(0,0,0,0.98); display: none; z-index: 60000; align-items: center; justify-content: center; }
        .admin-form { background: #050505; border: 1px solid var(--red); padding: 50px; border-radius: 25px; width: 400px; text-align: center; }
        .admin-input { width: 100%; padding: 15px; margin: 10px 0; background: #111; border: 1px solid #333; color: #fff; border-radius: 8px; }
    </style>
</head>
<body>

<div id="intro-stage">
    <canvas id="abyss-canvas"></canvas>
    <div class="vignette-layer"></div>
    <div id="heartbeat-scanner"></div>
    <div class="monolith-wrap">
        <div class="silver-monolith"><h1 class="brand-text">INDIPLEX</h1></div>
    </div>
</div>

<div id="vanta-background"></div>

<div id="home-wrapper">
    <nav>
        <div class="logo-group" onclick="triggerAdminSequence()">
            <div class="nav-brand">INDIPLEX</div>
            <div class="nav-slogan">THE ABYSSAL CINEMA EXPERIENCE</div>
        </div>
        <div style="display:flex; align-items:center; gap:20px;">
            <input type="text" id="globalSearch" class="search-bar" oninput="performSearch(this.value)" placeholder="Search...">
            <div onclick="toggleSidebar()" style="cursor:pointer; font-size:26px; color:var(--red);"><i class="fa-solid fa-bars-staggered"></i></div>
        </div>
    </nav>

    <div id="default-view">
        <div class="section-header">TRENDING NOW</div>
        <div class="movies-grid" id="trending-grid"></div>
        <div class="section-header">WEB SERIES</div>
        <div class="movies-grid" id="series-grid"></div>
    </div>
    
    <div id="search-view" style="display:none;">
        <div class="section-header">SEARCH RESULTS <button onclick="exitSearch()" style="float:right; background:red; border:none; color:white; padding:5px 15px; border-radius:20px; cursor:pointer;">X</button></div>
        <div class="movies-grid" id="search-grid"></div>
    </div>
</div>

<div id="details-panel">
    <div class="panel-close" onclick="hideDetails()">&times;</div>
    <div id="details-injector"></div>
</div>

<div id="theater-mode">
    <div class="theater-nav">
        <div class="back-btn" onclick="exitTheater()"><i class="fa-solid fa-arrow-left"></i></div>
        <div class="server-btns">
            <div class="srv-pill active" id="srv1" onclick="switchSrv(1)">SERVER 1</div>
            <div class="srv-pill" id="srv2" onclick="switchSrv(2)">SERVER 2</div>
        </div>
    </div>
    <iframe id="theater-frame" allowfullscreen></iframe>
</div>

<div id="sidebar">
    <div class="menu-link" onclick="location.reload()"><i class="fa-solid fa-house"></i> HOME</div>
    <div class="menu-link" onclick="alert('Void Engine v3.0')"><i class="fa-solid fa-bolt"></i> STATUS</div>
    
    <a href="https://www.effectivegatecpm.com/g3nyyzecfb?key=0aa81739536602bd405ac6607d8103ce" target="_blank" class="smart-link-ad">
        <i class="fa-solid fa-crown"></i> UNLOCK PREMIUM SERVERS
    </a>

    <div id="admin-logout" class="menu-link" onclick="handleLogout()" style="display:none; color:var(--red); margin-top:50px; border-top:1px solid #222;">
        <i class="fa-solid fa-power-off"></i> LOGOUT ADMIN
    </div>
</div>

<div id="admin-gate">
    <div class="admin-form">
        <h2 style="color:var(--red); margin-bottom:20px;">ADMIN ACCESS</h2>
        <input type="text" id="userK" class="admin-input" placeholder="ID">
        <input type="password" id="passK" class="admin-input" placeholder="PIN">
        <button onclick="verifyAdmin()" style="width:100%; padding:15px; background:var(--red); border:none; color:white; border-radius:10px; cursor:pointer;">LOGIN</button>
    </div>
</div>

<script>
    const API_KEY = 'fe6f0e951aff4fb2565255ce0d940fc6';
    let adminTaps = 0;
    let currentMedia = { id: null, type: null, s: 1, e: 1 };

    // --- [1] RESTORED ABYSS CANVAS ---
    const canvas = document.getElementById('abyss-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;

    class Particle {
        constructor() { this.init(); }
        init() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.z = Math.random() * canvas.width;
            this.v = -3.5;
        }
        update() {
            this.z += this.v;
            if (this.z <= 0) this.init();
            this.sx = (this.x - canvas.width/2) * (canvas.width/this.z) + canvas.width/2;
            this.sy = (this.y - canvas.height/2) * (canvas.width/this.z) + canvas.height/2;
            this.size = (1 - this.z / canvas.width) * 4;
            this.alpha = (1 - this.z / canvas.width);
        }
        draw() {
            ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
            ctx.beginPath(); ctx.arc(this.sx, this.sy, this.size, 0, Math.PI*2); ctx.fill();
        }
    }

    function initAbyss() {
        for(let i=0; i<250; i++) particles.push(new Particle());
        loop();
    }
    function loop() {
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,canvas.width,canvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(loop);
    }

    // --- [2] SYSTEM BOOT ---
    window.onload = () => {
        initAbyss();
        const hb = document.getElementById('heartbeat-scanner');
        setTimeout(() => { hb.style.opacity = '1'; hb.style.animation = 'scan-animation 3s forwards'; }, 1000);

        setTimeout(() => {
            document.getElementById('intro-stage').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('intro-stage').style.display = 'none';
                document.getElementById('home-wrapper').style.display = 'block';
                VANTA.NET({ el: "#vanta-background", mouseControls: true, touchControls: true, color: 0xff0000, backgroundColor: 0x0 });
                fetchInitialData();
                if(localStorage.getItem('indiplex_admin') === 'true') document.getElementById('admin-logout').style.display = 'flex';
            }, 1800);
        }, 7500);
    };

    // --- [3] DATA & SERIES ENGINE ---
    async function fetchInitialData() {
        const trend = await fetch(`https://api.themoviedb.org/3/trending/all/week?api_key=${API_KEY}&region=IN`);
        const tData = await trend.json();
        renderGrid('trending-grid', tData.results);

        const series = await fetch(`https://api.themoviedb.org/3/tv/popular?api_key=${API_KEY}&with_original_language=hi`);
        const sData = await series.json();
        renderGrid('series-grid', sData.results);
    }

    function renderGrid(id, list) {
        document.getElementById(id).innerHTML = list.map(item => {
            if(!item.poster_path) return '';
            const type = item.media_type || (item.name ? 'tv' : 'movie');
            return `
                <div class="media-card" onclick="selectMedia(${item.id}, '${type}')">
                    <img src="https://image.tmdb.org/t/p/w500${item.poster_path}">
                    <h3>${item.title || item.name}</h3>
                </div>
            `;
        }).join('');
    }

    async function selectMedia(id, type) {
        if(type === 'movie') {
            currentMedia = { id, type, s: 0, e: 0 };
            openTheater();
        } else {
            const res = await fetch(`https://api.themoviedb.org/3/tv/${id}?api_key=${API_KEY}`);
            const data = await res.json();
            currentMedia.id = id; currentMedia.type = 'tv';
            renderSeriesUI(data);
        }
    }

    function renderSeriesUI(data) {
        const inj = document.getElementById('details-injector');
        inj.innerHTML = `
            <div class="series-hero">
                <img src="https://image.tmdb.org/t/p/w500${data.poster_path}" class="series-poster">
                <div class="series-info">
                    <h1 class="series-title">${data.name}</h1>
                    <p class="series-desc">${data.overview}</p>
                    <div class="season-track" id="season-tabs"></div>
                </div>
            </div>
            <div id="ep-grid" class="episode-grid"></div>
        `;
        document.getElementById('details-panel').style.display = 'block';
        const tabs = data.seasons.filter(s => s.season_number > 0).map(s => 
            `<div class="season-pill" id="sp-${s.season_number}" onclick="fetchEpisodes(${data.id}, ${s.season_number})">SEASON ${s.season_number}</div>`
        ).join('');
        document.getElementById('season-tabs').innerHTML = tabs;
        fetchEpisodes(data.id, 1);
    }

    async function fetchEpisodes(id, sNum) {
        currentMedia.s = sNum;
        document.querySelectorAll('.season-pill').forEach(p => p.classList.remove('active'));
        document.getElementById(`sp-${sNum}`).classList.add('active');
        
        const res = await fetch(`https://api.themoviedb.org/3/tv/${id}/season/${sNum}?api_key=${API_KEY}`);
        const data = await res.json();
        document.getElementById('ep-grid').innerHTML = data.episodes.map(e => `
            <div class="episode-card" onclick="playEp(${e.episode_number})">
                <div style="width:40px; height:40px; background:red; border-radius:50%; display:flex; align-items:center; justify-content:center;"><i class="fa-solid fa-play"></i></div>
                <div><b>EP ${e.episode_number}</b><br><small>${e.name}</small></div>
            </div>
        `).join('');
    }

    function playEp(n) { currentMedia.e = n; openTheater(); }

    // --- [4] THEATER & SERVERS ---
    function openTheater() {
        document.getElementById('theater-mode').style.display = 'block';
        switchSrv(1);
    }

    function switchSrv(n) {
        document.querySelectorAll('.srv-pill').forEach((p, i) => p.classList.toggle('active', i+1 === n));
        const { id, type, s, e } = currentMedia;
        let url = n === 1 
            ? `https://vidsrc.cc/v2/embed/${type}/${id}${type==='tv'?`/${s}/${e}`:''}`
            : `https://vidsrc.xyz/embed/${type}/${id}${type==='tv'?`/${s}/${e}`:''}`;
        document.getElementById('theater-frame').src = url;
    }

    // --- [5] UTILS & ADMIN ---
    function exitTheater() { document.getElementById('theater-mode').style.display = 'none'; document.getElementById('theater-frame').src = ''; }
    function hideDetails() { document.getElementById('details-panel').style.display = 'none'; }
    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); }
    
    async function performSearch(q) {
        if(q.length < 3) { exitSearch(); return; }
        const res = await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${API_KEY}&query=${q}`);
        const data = await res.json();
        document.getElementById('default-view').style.display = 'none';
        document.getElementById('search-view').style.display = 'block';
        renderGrid('search-grid', data.results);
    }
    function exitSearch() { 
        document.getElementById('globalSearch').value = '';
        document.getElementById('search-view').style.display = 'none';
        document.getElementById('default-view').style.display = 'block';
    }

    function triggerAdminSequence() {
        adminTaps++;
        if(adminTaps >= 10) { document.getElementById('admin-gate').style.display = 'flex'; adminTaps = 0; }
        setTimeout(() => adminTaps = 0, 4000);
    }
    function verifyAdmin() {
        if(document.getElementById('userK').value === 'sans' && document.getElementById('passK').value === '0510') {
            localStorage.setItem('indiplex_admin', 'true'); location.reload();
        } else { alert('Access Denied'); }
    }
    function handleLogout() { localStorage.removeItem('indiplex_admin'); location.reload(); }
</script>
</body>
</html>
